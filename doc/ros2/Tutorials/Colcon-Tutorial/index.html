<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Colcon Tutorial</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    <link rel="canonical" href="https://ros-infrastructure.github.io/index.ros.org//doc/ros2/Tutorials/Colcon-Tutorial/">
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie-1.4.1/jquery.cookie.js type="text/javascript"></script>

    <script type="text/javascript" src=/js/ga.js async></script>
    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">

      <div align="center">
        <br>
        <table id="topnav-table">
          <tr>
            <td valign="middle">
                ROS Resources:
              <a href="http://wiki.ros.org/">Documentation</a>
              |
              <a href="http://wiki.ros.org/Support">Support</a>
              |
              <a href="http://discourse.ros.org/">Discussion Forum</a>
              |
              <a href="http://status.ros.org/">Service Status</a>
              |
              <a href="http://answers.ros.org/">Q&A answers.ros.org</a>
            </td>
          </tr>
        </table> <!-- topnav-table -->
      </div>

      <div class="row">

        <div class="col-sm-12 col-md-9" style="margin-top: 8px">
          <div class="row">
            <!-- title -->
            <div class="col-xs-12 col-sm-3 col-md-3" style="white-space:nowrap;">
              <a class="site-title" href="/">ROS Index</a> <sup><a href="https://github.com/ros-infrastructure/rosindex/issues/new" style="vertical-align:super;" class="label label-warning" target="_blank">BETA</a></sup>
            </div>

            <!-- main links -->
            <div class="col-xs-12 col-sm-9 col-md-9 text-right">
              <ul class="list-inline" style="margin-bottom:0px;">
                <li><a class="btn btn-link" href="/about">About</a></li>

                <li class="dropdown">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Index <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <li><a href="/packages/page/1/time/">Package List</a></li>
                    <li><a href="/repos/page/1/time/">Repository List</a></li>

                    <li class="hidden" class="divider"></li>


                    <li class="hidden"><a href="/srvs/">Nodes</a></li>
                    <li class="hidden"><a href="/msgs/">Messages</a></li>
                    <li class="hidden"><a href="/srvs/">Services</a></li>
                    <li class="hidden"><a href="/srvs/">Plugins</a></li>

                    <li class="divider"></li>

                    <li><a href="/deps/">System Dependencies</a></li>
                  </ul>
                </li>

                <li class="dropdown disabled">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Doc <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    
                    <li>
                      <a href="/doc/ros2">
                        ROS2 Overview
                      </a>
                    </li>
                    
                    <li class="hidden" class="divider"></li>

                    <li class="hidden"><a href="/doc/tutorials">Tutorials</a></li>
                    <li class="hidden"><a href="/doc/readmes">Readmes</a></li>
                    <li class="hidden"><a href="/doc/apis">APIs</a></li>
                  </ul>
                </li>

                <li><a class="btn btn-link" href="/contribute">Contribute</a></li>
                <li><a class="btn btn-link" href="/stats">Stats</a></li>
              </ul>

            </div>
          </div>
        </div>

        <!-- searchbox -->
        <div class="col-sm-12 col-md-3" style="margin-top: 12px">
          <form id="top-searchbox" action="/search/" role="form" method="get">
            <div class="input-group input-group-sm">
              <input type="text" class="form-control" name="q" placeholder="Search ROS Packages">
              <span class="input-group-btn">
                <button class="btn btn-default btn-sm" title="Search ROS Packages" type="submit"><span class="glyphicon glyphicon-search"></span></button>
              </span>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!--
    <a class="site-title" href="/">ROS Index</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="/packages">Packages</a>
        <a class="page-link" href="/repos">Repositories</a>
        <a class="page-link" href="/search">Search</a>
      </div>
    </nav>
    -->

  </div>
  <script type="text/javascript">
    $('#top-searchbox').submit(function() {
        return $('#top-searchbox input:text').filter(function() {
          return $(this).val() == "";
        }).length == 0;
    });
  </script>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/doc/ros2/">ROS2 Overview</a></li>
        
        <li class="active">Colcon Tutorial</li>
        
      </ol>
    </div>
    <div class="row">
      <a type="button" href="https://github.com/ros2/ros2_documentation/edit/master/Tutorials/Colcon-Tutorial.rst" class="btn btn-success pull-right">
        Edit on Github
      </a>
      <div class="section" id="using-colcon-to-build-packages">
<h1>Using Colcon to build packages<a class="headerlink" href="#using-colcon-to-build-packages" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#background" id="id1">Background</a></li>
<li><a class="reference internal" href="#prerequisites" id="id2">Prerequisites</a><ul>
<li><a class="reference internal" href="#development-environment" id="id3">Development Environment</a></li>
</ul>
</li>
<li><a class="reference internal" href="#basics" id="id4">Basics</a><ul>
<li><a class="reference internal" href="#create-directory-structure" id="id5">Create directory structure</a></li>
<li><a class="reference internal" href="#add-some-sources" id="id6">Add some sources</a></li>
<li><a class="reference internal" href="#run-the-build" id="id7">Run the build</a></li>
<li><a class="reference internal" href="#run-the-tests" id="id8">Run the tests</a></li>
<li><a class="reference internal" href="#source-the-environment" id="id9">Source the environment</a></li>
<li><a class="reference internal" href="#try-a-demo" id="id10">Try a demo</a></li>
</ul>
</li>
<li><a class="reference internal" href="#develop-your-own-package" id="id11">Develop your own package</a><ul>
<li><a class="reference internal" href="#create-an-overlay" id="id12">Create an overlay</a></li>
<li><a class="reference internal" href="#create-your-own-package" id="id13">Create your own package</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tips" id="id14">Tips</a></li>
</ul>
</div>
<p>This will provide you with a quick summary of how to get up and running using <code class="docutils literal"><span class="pre">colcon</span></code> and a ROS workspace.
It will be a practical tutorial and is not designed to replace the core documentation.</p>
<p>ROS 2 releases before Bouncy were using <code class="docutils literal"><span class="pre">ament_tools</span></code> described in the <a class="reference internal" href="../Ament-Tutorial/"><em>ament tutorial</em></a>.</p>
<div class="section" id="background">
<h2><a class="toc-backref" href="#id1">Background</a><a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h2>
<p>colcon is an iteration on the ROS build tools catkin_make, catkin_make_isolated, catkin_tools and ament_tools.
For more information on the design of colcon see <a class="reference external" href="http://design.ros2.org/articles/build_tool.html">this document</a>.</p>
<p>The source code can be found in the <a class="reference external" href="https://github.com/colcon">colcon GitHub organization</a>.</p>
</div>
<div class="section" id="prerequisites">
<h2><a class="toc-backref" href="#id2">Prerequisites</a><a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<div class="section" id="development-environment">
<h3><a class="toc-backref" href="#id3">Development Environment</a><a class="headerlink" href="#development-environment" title="Permalink to this headline">¶</a></h3>
<p>Make sure that you have setup your development environment according to the building-from-source <a class="reference internal" href="../../Installation/"><em>instructions</em></a>.</p>
</div>
</div>
<div class="section" id="basics">
<h2><a class="toc-backref" href="#id4">Basics</a><a class="headerlink" href="#basics" title="Permalink to this headline">¶</a></h2>
<p>A ROS workspace is a directory with a particular structure.
Commonly there is a <code class="docutils literal"><span class="pre">src</span></code> subdirectory.
Inside that subdirectory is where the source code of ROS packages will be located.
Typically the directory starts otherwise empty.</p>
<p>colcon does out of source builds.
By default it will create the following directories as peers of the <code class="docutils literal"><span class="pre">src</span></code> directory:</p>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">build</span></code> directory will be where intermediate files are stored.
For each package a subfolder will be created in which e.g. CMake is being invoked.</li>
<li>The <code class="docutils literal"><span class="pre">install</span></code> directory is where each package will be installed to.
By default each package will be installed into a separate subdirectory.</li>
<li>The <code class="docutils literal"><span class="pre">log</span></code> directory contains various logging information about each colcon invocation.</li>
</ul>
<p>NB: Compared to catkin there is no <code class="docutils literal"><span class="pre">devel</span></code> directory.</p>
<div class="section" id="create-directory-structure">
<h3><a class="toc-backref" href="#id5">Create directory structure</a><a class="headerlink" href="#create-directory-structure" title="Permalink to this headline">¶</a></h3>
<p>To make the basic structure in the directory <code class="docutils literal"><span class="pre">~/ros2_ws</span></code>:</p>
<div class="highlight-bash"><div class="highlight"><pre>mkdir -p ~/ros2_ws/src
<span class="nb">cd</span> ~/ros2_ws
</pre></div>
</div>
<p>This is the directory structure of <code class="docutils literal"><span class="pre">~/ros2_ws</span></code> that you can expect at this point:</p>
<div class="highlight-bash"><div class="highlight"><pre>.
└── src

<span class="m">1</span> directory, <span class="m">0</span> files
</pre></div>
</div>
</div>
<div class="section" id="add-some-sources">
<h3><a class="toc-backref" href="#id6">Add some sources</a><a class="headerlink" href="#add-some-sources" title="Permalink to this headline">¶</a></h3>
<p>To start off we need to setup an underlay workspace without any of ROS 2 installed.</p>
<div class="highlight-bash"><div class="highlight"><pre>wget https://raw.githubusercontent.com/ros2/ros2/master/ros2.repos
vcs import ~/ros2_ws/src &lt; ros2.repos
</pre></div>
</div>
<p>This is the directory structure of <code class="docutils literal"><span class="pre">~/ros2_ws</span></code> that you can expect after adding sources (note the exact structure and number of directories/files may change over time):</p>
<div class="highlight-bash"><div class="highlight"><pre>.
├── ros2.repos
└── src
    ├── ament
    │   ├── ament_cmake
    │   ├── ament_index
    <span class="p">|</span>   ...
    │   ├── osrf_pycommon
    │   └── uncrustify
    ├── eProsima
    │   ├── Fast-CDR
    │   └── Fast-RTPS
    ├── ros
    │   ├── class_loader
    │   └── console_bridge
    └── ros2
        ├── ament_cmake_ros
        ├── common_interfaces
        ├── demos
        ...
        ├── urdfdom
        ├── urdfdom_headers
        └── vision_opencv

<span class="m">51</span> directories, <span class="m">1</span> file
</pre></div>
</div>
</div>
<div class="section" id="run-the-build">
<h3><a class="toc-backref" href="#id7">Run the build</a><a class="headerlink" href="#run-the-build" title="Permalink to this headline">¶</a></h3>
<p>Since build types such as <code class="docutils literal"><span class="pre">ament_cmake</span></code> do not support the concept of the <code class="docutils literal"><span class="pre">devel</span></code> space and require the package to be installed, colcon supports the option <code class="docutils literal"><span class="pre">--symlink-install</span></code>.
This allows the installed files to be changed by changing the files in the <code class="docutils literal"><span class="pre">source</span></code> space (e.g. Python files or other not compiled resourced) for faster iteration.</p>
<div class="highlight-bash"><div class="highlight"><pre>colcon build --symlink-install
</pre></div>
</div>
</div>
<div class="section" id="run-the-tests">
<span id="colcon-run-the-tests"></span><h3><a class="toc-backref" href="#id8">Run the tests</a><a class="headerlink" href="#run-the-tests" title="Permalink to this headline">¶</a></h3>
<p>To run the tests you just built, run the following:</p>
<div class="highlight-bash"><div class="highlight"><pre>colcon <span class="nb">test</span>
</pre></div>
</div>
</div>
<div class="section" id="source-the-environment">
<h3><a class="toc-backref" href="#id9">Source the environment</a><a class="headerlink" href="#source-the-environment" title="Permalink to this headline">¶</a></h3>
<p>When colcon has completed building successfully the output will be in the <code class="docutils literal"><span class="pre">install</span></code> directory.
To use the executables and libraries you need to e.g. add the <code class="docutils literal"><span class="pre">install/bin</span></code> directory to your path.
colcon will have generated bash/bat files in the <code class="docutils literal"><span class="pre">install</span></code> directory to help setup the environment.
These files will both add the required elements to your path and library paths as well as provide any exported bash or shell commands exported by packages.</p>
<div class="highlight-bash"><div class="highlight"><pre>. install/local_setup.bash
</pre></div>
</div>
<p>NB: This is slightly different than catkin.
The <code class="docutils literal"><span class="pre">local_setup.*</span></code> file is slightly different than the <code class="docutils literal"><span class="pre">setup.*</span></code> file in that it will only apply settings from the current workspace.
When using more than one workspace you will still source the <code class="docutils literal"><span class="pre">setup.*</span></code> files to get the environment including all parent workspaces.</p>
</div>
<div class="section" id="try-a-demo">
<h3><a class="toc-backref" href="#id10">Try a demo</a><a class="headerlink" href="#try-a-demo" title="Permalink to this headline">¶</a></h3>
<p>With the environment sourced you can now run executables built by colcon.</p>
<div class="highlight-bash"><div class="highlight"><pre>ros2 run demo_nodes_cpp listener <span class="p">&amp;</span>
ros2 run demo_nodes_cpp talker
</pre></div>
</div>
<p>And you will see the numbers incrementing.</p>
<p>Lets take down the nodes and try creating our own workspace overlay.</p>
<div class="highlight-bash"><div class="highlight"><pre>^-C
<span class="nb">kill</span> %1
</pre></div>
</div>
</div>
</div>
<div class="section" id="develop-your-own-package">
<h2><a class="toc-backref" href="#id11">Develop your own package</a><a class="headerlink" href="#develop-your-own-package" title="Permalink to this headline">¶</a></h2>
<p>colcon uses the same <code class="docutils literal"><span class="pre">package.xml</span></code> specification as defined for catkin in <a class="reference external" href="http://www.ros.org/reps/rep-0149.html">REP 149</a>.</p>
<p>You can create your own package inside the <code class="docutils literal"><span class="pre">src</span></code> directory however it is recommended to use an overlay when you are going to iterate only on a few packages.</p>
<div class="section" id="create-an-overlay">
<h3><a class="toc-backref" href="#id12">Create an overlay</a><a class="headerlink" href="#create-an-overlay" title="Permalink to this headline">¶</a></h3>
<p>Let&#8217;s make a new overlay directory <code class="docutils literal"><span class="pre">~/ros2_overlay_ws</span></code>.</p>
<div class="highlight-bash"><div class="highlight"><pre>mkdir -p ~/ros2_overlay_ws/src
<span class="nb">cd</span> ~/ros2_overlay_ws/src
</pre></div>
</div>
<p>And to get started we&#8217;ll overlay the <a class="reference external" href="https://github.com/ros2/examples">ros2/examples repository</a>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c1"># If you know that you&#39;re using the latest branch of all</span>
<span class="c1"># repositories in the underlay, you can also get the latest</span>
<span class="c1"># version of the ros2/examples repository, with this command:</span>
<span class="c1">#   git clone https://github.com/ros2/examples.git</span>
<span class="c1"># Otherwise, clone a copy from the underlay source code:</span>
git clone ~/ros2_ws/src/ros2/examples
</pre></div>
</div>
<p>And build the overlay, but let&#8217;s build with debug so we can make sure to get debug symbols:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">cd</span> ~/ros2_overlay_ws
colcon build --cmake-args -DCMAKE_BUILD_TYPE<span class="o">=</span>Debug
</pre></div>
</div>
<p>This overlay has not yet been setup to be on top of the existing underlay so you&#8217;ll still find that <code class="docutils literal"><span class="pre">which</span> <span class="pre">talker</span></code> currently refers to the one from the underlay.</p>
<p>If you source <code class="docutils literal"><span class="pre">~/ros2_overlay_ws/install/local_setup.bash</span></code> it will change to refer to talker in the overlay.</p>
<p>If you are returning with a new terminal to your development and want to pick up developing on your overlay you can simply source <code class="docutils literal"><span class="pre">~/ros2_overlay_ws/install/setup.bash</span></code> which will source all parent workspaces environments automatically.</p>
</div>
<div class="section" id="create-your-own-package">
<h3><a class="toc-backref" href="#id13">Create your own package</a><a class="headerlink" href="#create-your-own-package" title="Permalink to this headline">¶</a></h3>
<p>You can create your own package.
The equivalent of <code class="docutils literal"><span class="pre">catkin_create_package</span></code> is available as <code class="docutils literal"><span class="pre">ros2</span> <span class="pre">pkg</span> <span class="pre">create</span></code>.</p>
<p>colcon supports multiple build types.
The recommended build types are <code class="docutils literal"><span class="pre">ament_cmake</span></code> and <code class="docutils literal"><span class="pre">ament_python</span></code>.
Also supported are pure <code class="docutils literal"><span class="pre">cmake</span></code> packages.</p>
<p>An example of an <code class="docutils literal"><span class="pre">ament_python</span></code> build is the <a class="reference external" href="https://github.com/ament/ament_index/tree/master/ament_index_python">ament_index_python package</a> , where the setup.py is the primary entry point for building.</p>
<p>A package such as <a class="reference external" href="https://github.com/ros2/demos/tree/master/demo_nodes_cpp">demo_nodes_cpp</a> uses the <code class="docutils literal"><span class="pre">ament_cmake</span></code> build type, and uses CMake as the build tool.</p>
</div>
</div>
<div class="section" id="tips">
<h2><a class="toc-backref" href="#id14">Tips</a><a class="headerlink" href="#tips" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">If you do not want to build a specific package place an empty file named <code class="docutils literal"><span class="pre">COLCON_IGNORE</span></code> in the directory and it will not be indexed.</p>
</li>
<li><p class="first">If you want to avoid configuring and building tests in CMake packages you can pass: <code class="docutils literal"><span class="pre">--cmake-args</span> <span class="pre">-DBUILD_TESTING=0</span></code>.</p>
</li>
<li><p class="first">If you want to run a single particular test from a package:</p>
<div class="highlight-bash"><div class="highlight"><pre>colcon <span class="nb">test</span> --packages-select YOUR_PKG_NAME --ctest-args -R YOUR_TEST_IN_PKG
</pre></div>
</div>
</li>
</ul>
</div>
</div>

      &nbsp;
    </div>
  </div>
</div>

<script type="text/javascript">
$(document).ready(
    function() {
      $('#toc').toc({
        title: '',
        listType: 'ul',
        showSpeed: 0,
        headers: 'h2, h3' });
});
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4 col-md-4">
          
            <a href="https://github.com/ros-infrastructure" title="Find rosindex in Github">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>

            <span class="username">ros-infrastructure</span>
          </a>
          |
          <em>generated on 2019-01-22</em>
        
        </div>
        <div class="col-sm-8 col-md-8 text-right">
          <p class="text">a community-maintained index of robotics software
 | <a href="/privacy.txt">privacy</a></p>
        </div>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
